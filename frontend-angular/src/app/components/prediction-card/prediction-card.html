<div class="rounded-lg border" [ngClass]="isLocked ? 'border-[#333] bg-[#111] opacity-70' : 'border-[#222] bg-[#121212]'">
  <!-- Level 1: Context -->
  <div class="flex items-center justify-between p-3 border-b border-[#222] bg-[#0F0F0F]">
    <div class="flex items-center gap-2">
      <!-- Sport Icon (Trophy for now) -->
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>
      <span class="text-sm">{{ prediction.league }}</span>
    </div>
    <span class="text-sm font-mono">{{ prediction.time }}</span>
  </div>

  <!-- Level 2: Teams -->
  <div class="p-4">
    <div class="flex justify-between items-center mb-4">
      <span class="font-medium">{{ prediction.homeTeam }}</span>
      <span class="text-[#666]">vs</span>
      <span class="font-medium">{{ prediction.awayTeam }}</span>
    </div>

    <!-- Level 3: Prediction -->
    <ng-container *ngIf="!isLocked; else lockedTemplate">
      <div class="mb-3">
        <div class="text-center mb-2">
          <span class="font-mono font-bold" [ngClass]="isIncorrect ? 'text-red-500' : 'text-[#00FF41]'">
            {{ prediction.prediction }}
          </span>
        </div>
        <div class="flex items-center gap-2">
          <span class="text-xs">Confidence:</span>
          <div class="flex-1 bg-[#222] h-2 rounded-full overflow-hidden">
            <div class="h-full" [ngClass]="isIncorrect ? 'bg-red-500' : 'bg-[#00FF41]'" [style.width.%]="prediction.confidence"></div>
          </div>
          <span class="font-mono text-xs">
            {{ prediction.confidence.toFixed(0) }}%
          </span>
        </div>
      </div>
    </ng-container>

    <ng-template #lockedTemplate>
        <div class="text-center py-4 px-2 border border-dashed border-[#333] rounded bg-[#0A0A0A] bg-opacity-50">
            <p class="text-[#888] text-sm mb-1">Future prediction locked</p>
            <p class="text-[#00FF41] text-xs">Upgrade to access</p>
        </div>
    </ng-template>

    <!-- Level 4: Result (for past predictions) -->
    <div *ngIf="isPast && prediction.result !== undefined" class="mt-3 p-2 rounded flex justify-center items-center gap-2" [ngClass]="prediction.result ? 'bg-[#0A2A0A]' : 'bg-[#2A0A0A]'">
        <ng-container *ngIf="prediction.result; else incorrectTemplate">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-green-500"><polyline points="20 6 9 17 4 12"></polyline></svg>
            <span class="text-green-500 font-medium">Correct</span>
        </ng-container>
        <ng-template #incorrectTemplate>
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 text-red-500"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            <span class="text-red-500 font-medium">Incorrect</span>
        </ng-template>
    </div>
  </div>
</div>
