
<header class="p-4 border-b border-[#222] flex justify-between items-center">
  <h1 class="text-2xl font-bold text-[#00FF41]">The Oracle</h1>
  <button (click)="togglePremium()" 
          [ngClass]="isPremium ? 'bg-[#333] text-[#E0E0E0]' : 'bg-[#00FF41] text-black'"
          class="px-4 py-2 rounded">
    {{ isPremium ? 'Switch to Free View' : 'Activate Premium' }}
  </button>
</header>

<main class="container mx-auto p-4">
  <app-day-selector 
    [selectedDayOffset]="selectedDayOffset" 
    [isPremium]="isPremium"
    (selectDay)="handleDaySelect($event)">
  </app-day-selector>

  <!-- Loading and Error States -->
  <div *ngIf="isLoading" class="flex justify-center items-center h-64">
    <div class="text-center text-lg">Loading data...</div>
  </div>

  <div *ngIf="error" class="text-center text-red-500 my-8 p-4 border border-red-500 rounded-lg">
    <p class="font-bold">Error loading data:</p>
    <p>{{ error }}</p>
  </div>

  <!-- Data Display Container -->
  <div *ngIf="!isLoading && !error">
    <app-architects-simulator
      [ticketsData]="ticketsData"
      [selectedDayOffset]="selectedDayOffset">
    </app-architects-simulator>

    <!-- Section for Tickets -->
    <div class="mb-12">
      <h2 class="text-3xl font-bold mb-6 text-center">Tickets du Jour</h2>
      <app-tickets-list 
        [ticketsData]="ticketsData" 
        [selectedDayOffset]="selectedDayOffset">
      </app-tickets-list>
    </div>

    <!-- Section for Prediction List -->
    <div class="mb-12">
      <app-predictions-list 
        [allPredictions]="predictionsData" 
        [dayOffset]="selectedDayOffset"
        [isPremium]="isPremium">
      </app-predictions-list>
    </div>
  </div>
</main>

<app-paywall *ngIf="showPaywall" (close)="closePaywall()" (activatePremium)="handleActivatePremium()"></app-paywall>
