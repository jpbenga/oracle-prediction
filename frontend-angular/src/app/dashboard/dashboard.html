<div class="container mx-auto p-4">
  <app-day-selector 
    [selectedDayOffset]="selectedDayOffset"
    (selectDay)="handleDaySelect($event)">
  </app-day-selector>
  
  <div *ngIf="isLoading" class="text-center mt-8">
    <p class="text-lg">Chargement des données...</p>
  </div>

  <div *ngIf="!isLoading && error" class="text-center mt-8 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert">
    <strong class="font-bold">Une erreur est survenue :</strong>
    <span class="block sm:inline">{{ error }}</span>
  </div>

  <div *ngIf="!isLoading && !error">
    <div class="mb-12">
      <h2 class="text-3xl font-bold text-gray-800 my-6">Tickets du Jour</h2>
      <div *ngIf="objectKeys(ticketsData).length > 0; else noTickets">
        <app-tickets-list [ticketsData]="ticketsData"></app-tickets-list>
      </div>
      <ng-template #noTickets>
        <div class="bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4" role="alert">
          <p>Aucun ticket n'a été généré pour cette date.</p>
        </div>
      </ng-template>
    </div>

    <div class="mb-12">
      <h2 class="text-3xl font-bold text-gray-800 my-6">Prédictions du Jour</h2>
      <div *ngIf="objectKeys(predictionsData).length > 0; else noPredictions">
        <app-predictions-list [allPredictions]="predictionsData"></app-predictions-list>
      </div>
      <ng-template #noPredictions>
        <div class="bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 mt-4" role="alert">
          <p>Aucune prédiction disponible pour cette date. C'est peut-être la trêve !</p>
        </div>
      </ng-template>
    </div>
    
    <app-architects-simulator [ticketsData]="ticketsData" [selectedDayOffset]="selectedDayOffset"></app-architects-simulator>
  </div>
</div>

<app-paywall *ngIf="showPaywall" (close)="closePaywall()" (activatePremium)="handleActivatePremium()"></app-paywall>